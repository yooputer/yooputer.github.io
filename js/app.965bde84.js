(function(){"use strict";var e={1306:function(e,t,n){var a={};n.r(a);var l=n(3751),s=n(641);const i={class:"container"},o={class:"people-section"},p={class:"title-container"},r={class:"payment-section"},c={class:"title-container"};function d(e,t,n,a,l,d){const u=(0,s.g2)("PeopleList"),m=(0,s.g2)("PaymentList"),y=(0,s.g2)("AddPaymentModal"),h=(0,s.g2)("CalculateResultModal");return(0,s.uX)(),(0,s.CE)("main",null,[(0,s.Lk)("div",i,[(0,s.Lk)("div",o,[(0,s.Lk)("div",p,[t[6]||(t[6]=(0,s.Lk)("div",{class:"title"},"사용자",-1)),(0,s.Lk)("button",{class:"add-button circle",onClick:t[0]||(t[0]=(...e)=>d.addPerson&&d.addPerson(...e))},"+")]),(0,s.bF)(u,{people:l.people,payments:l.payments,onUpdatePeople:d.updatePeople,onUpdatePayments:d.updatePayments},null,8,["people","payments","onUpdatePeople","onUpdatePayments"])]),(0,s.Lk)("div",r,[(0,s.Lk)("div",c,[t[7]||(t[7]=(0,s.Lk)("div",{class:"title"},"결제내역",-1)),(0,s.Lk)("button",{class:"add-button circle",onClick:t[1]||(t[1]=e=>d.openModal("addPayment"))},"+"),l.payments.length>0?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"reset-button",onClick:t[2]||(t[2]=e=>d.resetPayments())},"초기화")):(0,s.Q3)("",!0)]),(0,s.bF)(m,{people:l.people,payments:l.payments,onOpenEditPaymentModal:t[3]||(t[3]=e=>(l.selectedPaymentIndex=e,d.openModal("addPayment")))},null,8,["people","payments"])]),(0,s.Lk)("button",{class:"calculate",onClick:t[4]||(t[4]=e=>d.openModal("calculateResult"))},"계산하기"),l.showModal&&"addPayment"==l.modalType?((0,s.uX)(),(0,s.Wv)(y,{key:0,people:l.people,payments:l.payments,selectedPaymentIndex:l.selectedPaymentIndex,onCloseModal:d.closeModal,onUpdatePayments:d.updatePayments,onResetSelectedPaymentIndex:t[5]||(t[5]=e=>l.selectedPaymentIndex=null)},null,8,["people","payments","selectedPaymentIndex","onCloseModal","onUpdatePayments"])):(0,s.Q3)("",!0),l.showModal&&"calculateResult"==l.modalType?((0,s.uX)(),(0,s.Wv)(h,{key:1,people:l.people,payments:l.payments,onCloseModal:d.closeModal},null,8,["people","payments","onCloseModal"])):(0,s.Q3)("",!0)])])}n(4114),n(8992),n(3949);var u=n(33);const m={class:"modal-overlay"},y={class:"modal"},h=["value"],P={class:"participants-container"},f=["onClick"],v={key:0,class:"modal-actions"},k={key:1,class:"modal-actions"};function g(e,t,n,a,i,o){return(0,s.uX)(),(0,s.CE)("div",m,[(0,s.Lk)("div",y,[(0,s.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=e=>{this.$emit("closeModal")})},"×"),(0,s.Lk)("h2",null,"결제 내역 "+(0,u.v_)(null!=n.selectedPaymentIndex?"수정":"추가"),1),t[8]||(t[8]=(0,s.Lk)("label",{for:"description"},"설명",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.newPayment.description=e),id:"description"},null,512),[[l.Jo,i.newPayment.description]]),t[9]||(t[9]=(0,s.Lk)("label",{for:"amount"},"금액",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>i.newPayment.amount=e),id:"amount"},null,512),[[l.Jo,i.newPayment.amount]]),t[10]||(t[10]=(0,s.Lk)("label",{for:"payer"},"결제자",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.newPayment.payer=e),id:"payer"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.people,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,u.v_)(e),9,h)))),128))],512),[[l.u1,i.newPayment.payer]]),t[11]||(t[11]=(0,s.Lk)("label",null,"참가자",-1)),(0,s.Lk)("div",P,[(0,s.Lk)("div",{class:(0,u.C4)(["participant-item",{selected:o.isAllSelected()}]),onClick:t[4]||(t[4]=e=>o.selectAll())}," 전체 ",2),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.people,(e=>((0,s.uX)(),(0,s.CE)("div",{class:(0,u.C4)(["participant-item",{selected:o.isSelected(e)&&!o.isAllSelected()}]),key:e,onClick:t=>o.toggleParticipant(e)},(0,u.v_)(e),11,f)))),128))]),null==n.selectedPaymentIndex?((0,s.uX)(),(0,s.CE)("div",v,[(0,s.Lk)("button",{class:"add-button",onClick:t[5]||(t[5]=e=>o.addPayment()),style:{"margin-left":"auto"}},"추가")])):((0,s.uX)(),(0,s.CE)("div",k,[(0,s.Lk)("button",{class:"delete-button",onClick:t[6]||(t[6]=e=>o.deletePayment())},"삭제"),(0,s.Lk)("button",{class:"add-button",onClick:t[7]||(t[7]=e=>o.editPayment())},"수정")]))])])}var w={name:"AddPaymentModal",props:{people:{required:!1},payments:{required:!1},selectedPaymentIndex:{required:!1}},data(){return{newPayment:{description:"",amount:null,payer:"",participants:[]}}},mounted(){0==this.people.length&&(alert("사용자를 추가해주세요."),this.$emit("closeModal")),null!=this.selectedPaymentIndex&&(this.newPayment=this.payments[this.selectedPaymentIndex])},methods:{toggleParticipant(e){this.isAllSelected()&&(this.newPayment.participants=[]);const t=this.newPayment.participants.indexOf(e);-1===t?this.newPayment.participants.push(e):this.newPayment.participants.splice(t,1)},selectAll(){this.isAllSelected()?this.newPayment.participants=[]:this.newPayment.participants=JSON.parse(JSON.stringify(this.people))},isSelected(e){return this.newPayment.participants.includes(e)},isAllSelected(){return this.newPayment.participants.length==this.people.length},addPayment(){if(!this.validatePaymentInputs())return;let e=this.payments;e.push({description:this.newPayment.description,payer:this.newPayment.payer,participants:this.newPayment.participants,amount:this.newPayment.amount}),this.$emit("updatePayments",e),this.$emit("closeModal"),this.resetNewPayment()},resetNewPayment(){this.newPayment={description:"",amount:null,payer:"",participants:[]}},validatePaymentInputs(){return this.newPayment.description?this.newPayment.payer?0==this.newPayment.participants.length?(alert("참가자를 선택하세요. "),!1):!!this.newPayment.amount||(alert("가격을 입력하세요. "),!1):(alert("결제자를 선택하세요. "),!1):(alert("설명을 입력하세요. "),!1)},editPayment(){if(!this.validatePaymentInputs())return;let e=this.payments;e[this.selectedPaymentIndex]=this.newPayment,this.$emit("updatePayments",e),this.$emit("resetSelectedPaymentIndex"),this.$emit("closeModal"),this.resetNewPayment()},deletePayment(){if(!confirm("삭제하시겠습니까?"))return;let e=this.payments;e.splice(this.selectedPaymentIndex,1),this.$emit("updatePayments",e),this.$emit("resetSelectedPaymentIndex"),this.$emit("closeModal")}}},b=n(6262);const L=(0,b.A)(w,[["render",g]]);var C=L;const M={class:"modal-overlay"},S={class:"modal"},I={style:{"margin-bottom":"5px"}},E={class:"modal-actions"};function x(e,t,n,a,l,i){return(0,s.uX)(),(0,s.CE)("div",M,[(0,s.Lk)("div",S,[(0,s.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=e=>{this.$emit("closeModal")})},"×"),t[2]||(t[2]=(0,s.Lk)("h2",null,"계산 결과",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.calculateResult,((e,t,n)=>((0,s.uX)(),(0,s.CE)("div",{key:n},[(0,s.Lk)("h3",I,(0,u.v_)(t),1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,t)=>((0,s.uX)(),(0,s.CE)("p",{key:t,style:{margin:"5px"}},"→ "+(0,u.v_)(t)+" : "+(0,u.v_)(e)+"원",1)))),128))])))),128)),(0,s.Lk)("div",E,[(0,s.Lk)("button",{class:"add-button",onClick:t[1]||(t[1]=e=>i.copyResult())},"복사")])])])}var X={name:"CalculateResultModal",props:{people:{required:!1},payments:{required:!1}},mounted(){0==this.payments.length&&(alert("결제내역을 추가해주세요."),this.$emit("closeModal")),this.calculate()},data(){return{calculateResult:{}}},methods:{calculate(){let e={};for(let t of this.people)e[t]={};for(let t of this.payments){let n=Math.floor(t.amount/t.participants.length);for(let a of t.participants){if(a==t.payer)continue;let l=e[a][t.payer]??0;e[a][t.payer]=l+n}}for(let t in e)for(let n in e[t]){let a=e[t][n],l=e[n][t]??0;l>0&&a>=l&&(e[t][n]=a-l,e[n][t]=0)}this.calculateResult={};for(let t of this.people){let n={};for(let a in e[t]){let l=e[t][a]??0;l>0&&(n[a]=l)}Object.keys(n).length>0&&(this.calculateResult[t]=n)}},async copyResult(){let e="";for(let t in this.calculateResult){let n="";for(let e in this.calculateResult[t]){let a=this.calculateResult[t][e]??0;n+=" → "+e+" : "+a+"원\n"}e+=t+="\n",e+=n,e+="\n"}await navigator.clipboard.writeText(e),alert("복사 완료")}}};const O=(0,b.A)(X,[["render",x]]);var A=O;const $={class:"payment"},R={key:0},_=["onClick"],j={class:"payment-info"},q={class:"store"},F={class:"amount"},N={class:"payer-participants"},T={class:"payer"},U={class:"participants"};function J(e,t,n,a,l,i){return(0,s.uX)(),(0,s.CE)("div",$,[0==n.payments.length?((0,s.uX)(),(0,s.CE)("div",R," ❗결제내역이 없습니다. ")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.payments,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{class:"payment-item",key:a,onClick:e=>this.$emit("openEditPaymentModal",a)},[(0,s.Lk)("div",j,[(0,s.Lk)("div",q,(0,u.v_)(e.description),1),(0,s.Lk)("div",F,(0,u.v_)(e.amount.toLocaleString())+"원",1)]),(0,s.Lk)("div",N,[(0,s.Lk)("div",T,(0,u.v_)(e.payer),1),t[0]||(t[0]=(0,s.Lk)("span",{class:"separator"}," | ",-1)),(0,s.Lk)("div",U,(0,u.v_)(e.participants.length==n.people.length?"전체":e.participants.join(", ")),1)])],8,_)))),128))])}var K={name:"PaymentList",props:{people:{required:!1},payments:{required:!1}}};const Q=(0,b.A)(K,[["render",J]]);var V=Q;const W={class:"people"},B={key:0},z=["onClick"];function D(e,t,n,a,l,i){return(0,s.uX)(),(0,s.CE)("div",W,[0==n.people.length?((0,s.uX)(),(0,s.CE)("div",B," ❗사용자가 없습니다. ")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.people,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"person-item",key:e},[(0,s.eW)((0,u.v_)(e)+" ",1),(0,s.Lk)("span",{class:"user-delete-button",onClick:t=>i.deletePerson(e)},"✖",8,z)])))),128))])}n(4520);var G={name:"PeopleList",props:{people:{required:!1},payments:{required:!1}},methods:{deletePerson(e){if(!confirm("해당 사용자가 결제자이거나 유일한 참가자인 결제내역이 모두 삭제됩니다. \n삭제하시겠습니까?"))return;let t=this.people,n=this.payments;n=n.filter((t=>t.payer!==e)),n.forEach((t=>{t.participants=t.participants.filter((t=>t!==e))})),n=n.filter((e=>e.participants.length>0)),t=t.filter((t=>t!==e)),this.$emit("updatePeople",t),this.$emit("updatePayments",n)}}};const H=(0,b.A)(G,[["render",D]]);var Y=H,Z={computed:{$style(){return a["default"]}},components:{PeopleList:Y,PaymentList:V,AddPaymentModal:C,CalculateResultModal:A},data(){return{people:[],payments:[],showModal:!1,modalType:"",selectedPaymentIndex:null}},mounted(){this.setPeopleAndPaymentsByLocalStorage()},methods:{addPerson(){const e=prompt("추가할 이름을 입력하세요:");if(!e)return;if(this.people.includes(e))return void alert("이미 존재하는 사용자입니다. ");let t=this.people.length,n=this.payments;this.people.push(e),n.forEach((n=>{n.participants.length===t&&n.participants.push(e)})),this.updatePayments(n)},openModal(e){this.modalType=e,this.showModal=!0},closeModal(){this.showModal=!1},resetPayments(){confirm("초기화하시겠습니까?")&&this.updatePayments([])},setLocalStorage(){window.localStorage.setItem("people",JSON.stringify(this.people)),window.localStorage.setItem("payments",JSON.stringify(this.payments))},setPeopleAndPaymentsByLocalStorage(){let e=JSON.parse(window.localStorage.getItem("people")),t=JSON.parse(window.localStorage.getItem("payments"));this.people=e,this.payments=t},updatePeople(e){this.people=e,this.setLocalStorage()},updatePayments(e){this.payments=e,this.setLocalStorage()}}};const ee=(0,b.A)(Z,[["render",d]]);var te=ee;(0,l.Ef)(te).mount("#app")}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,a,l,s){if(!a){var i=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],s=e[c][2];for(var o=!0,p=0;p<a.length;p++)(!1&s||i>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[p])}))?a.splice(p--,1):(o=!1,s<i&&(i=s));if(o){e.splice(c--,1);var r=l();void 0!==r&&(t=r)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,l,s]}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,s,i=a[0],o=a[1],p=a[2],r=0;if(i.some((function(t){return 0!==e[t]}))){for(l in o)n.o(o,l)&&(n.m[l]=o[l]);if(p)var c=p(n)}for(t&&t(a);r<i.length;r++)s=i[r],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},a=self["webpackChunkjungsantime_front"]=self["webpackChunkjungsantime_front"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(1306)}));a=n.O(a)})();
//# sourceMappingURL=app.965bde84.js.map